
<div id="carouselExampleControls" class="carousel slide container mt-4" data-bs-ride="carousel">
  <div class="carousel-inner">
    <div class="carousel-item active">
      <img src="./family1.jpg" class="d-block w-100 " alt="...">
    </div>
    <div class="carousel-item">
      <img src="./80off.jpg" class="d-block w-100" alt="...">
    </div>
    <div class="carousel-item">
      <img src="./new.jpg" class="d-block w-100" alt="...">
    </div>
  </div>
  <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleControls" data-bs-slide="prev">
    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
    <span class="visually-hidden">Previous</span>
  </button>
  <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleControls" data-bs-slide="next">
    <span class="carousel-control-next-icon" aria-hidden="true"></span>
    <span class="visually-hidden">Next</span>
  </button>
</div>

<article id="New" class="py-3">
  <div class="box-card container" id="newpro">
      <h2>NEW PRODUCTS</h2>
      <div class="row" id="newProduct">

      </div>
  </div>
</article>
<article id="Promotion" class="py-3">
  <div class="box-card container" >
      <h2 >PROMOTION PRODUCTS</h2>
      <div class="row" id="promotionProduct"></div>
  </div>
</article> 
<article id="Popular" class="py-3">
  <div class="box-card container" >
      <h2 >POPULAR PRODUCTS</h2>
      <div class="row" id="popularProduct"></div>
  </div>
</article>
<script type="module">
  import {products} from './data.js';
  products.reverse();
  $(document).ready(function(){
      function newProduct(){
      var i=0;
      var product='';
      products.forEach((e)=>{
          if(i<4){
              if(e.reqular_price==0){
                  product+=`
                  <div class="col-6 col-xl-3 mt-3">
                  <div class="card" data-id="${e.id}">
                      <div class="image">
                          <img class="w-100" src="${e.image}" alt="">
                      </div>
                      <div class="title p-2">
                          <span><b>US ${e.sale_price}</b>
                          </del>
                          <p>${e.title}</p>
                          <div class="icon">
                              <i class="bi bi-star"></i>
                              <i class="bi bi-star"></i>
                              <i class="bi bi-star"></i>
                              <i class="bi bi-star"></i>
                              <i class="bi bi-star"></i>
                          </div>
                      </div>
                  </div>
              </div>
                  `;
              }else{
                  product+=`
                      <div class="col-6 col-xl-3 mt-3">
                  <div class="card" data-id="${e.id}">
                      <h6>Promotion</h6>
                      <div class="image">
                          <img class="w-100" src="${e.image}" alt="">
                      </div>
                      <div class="title p-2">
                          <span><b>US ${e.sale_price}</b>
                          <del><b>US ${e.reqular_price}</b>
                          </del>
                          <p>${e.title}</p>
                          <div class="icon">
                              <i class="bi bi-star"></i>
                              <i class="bi bi-star"></i>
                              <i class="bi bi-star"></i>
                              <i class="bi bi-star"></i>
                              <i class="bi bi-star"></i>
                          </div>
                      </div>
                  </div>
              </div>
                  `;
              }
              i++;
              $('#newProduct').html(product);

          }        
      })
      }
      newProduct()
      function promotionProduct(){
          var count=0;
          var product='';
          products.forEach((e)=>{
                  if(e.reqular_price!=0){
                     if(count<4){
                      product+=`
                      <div class="col-6 col-xl-3 mt-3">
                          <div class="card" data-id="${e.id}">
                              <h6>Promotion</h6>
                              <div class="image">
                                  <img class="w-100" src="${e.image}" alt="">
                              </div>
                              <div class="title p-2">
                                  <span><b>US ${e.sale_price}</b>
                                  <del><b>US ${e.reqular_price}</b>
                                  </del>
                                  <p>${e.title}</p>
                                  <div class="icon">
                                      <i class="bi bi-star"></i>
                                      <i class="bi bi-star"></i>
                                      <i class="bi bi-star"></i>
                                      <i class="bi bi-star"></i>
                                      <i class="bi bi-star"></i>
                                  </div>
                              </div>
                          </div>
                      </div>
                      `;
                     }
                     count++;
                  $('#promotionProduct').html(product);
                  }     
          })

      }
      promotionProduct()
      function popularProduct(){
          products.sort((a,b)=>b.views-a.views);
          console.log(products);

          var product='';
          var i=0;
          products.forEach((e)=>{
          if(i<4){
              if(e.reqular_price==0){
                  product+=` 
                  <div class="col-6 col-xl-3 mt-3">
                  <div class="card" data-id="${e.id}">
                      <div class="image">
                          <img class="w-100" src="${e.image}" alt="">
                      </div>
                      <div class="title p-2">
                          <span><b>US ${e.sale_price}</b>
                          </del>
                          <p>${e.title}</p>
                          <div class="icon">
                              <i class="bi bi-star"></i>
                              <i class="bi bi-star"></i>
                              <i class="bi bi-star"></i>
                              <i class="bi bi-star"></i>
                              <i class="bi bi-star"></i>
                          </div>
                      </div>
                  </div>
              </div>
                  `;
              }else{
                  product+=`
                      <div class="col-6 col-xl-3 mt-3">
                  <div class="card" data-id="${e.id}">
                      <h6>Promotion</h6>
                      <div class="image">
                          <img class="w-100" src="${e.image}" alt="">
                      </div>
                      <div class="title p-2">
                          <span><b>US ${e.sale_price}</b>
                          <del><b>US ${e.reqular_price}</b>
                          </del>
                          <p>${e.title}</p>
                          <div class="icon">
                              <i class="bi bi-star"></i>
                              <i class="bi bi-star"></i>
                              <i class="bi bi-star"></i>
                              <i class="bi bi-star"></i>
                              <i class="bi bi-star"></i>
                          </div>
                      </div>
                  </div>
              </div>
                  `;
              }
              i++;
              $('#popularProduct').html(product);

          }        
      }) 
      }
      popularProduct()
      
      function getDetail(){
          $('.card').click(function(){
              const id=$(this).attr('data-id');
              products.forEach(e=>{
                  if(id==e.id){
                       $('section').html(`
                       <div class="container mt-4">
                          <div class="row">
                              <div class="col-5">
                                  <img width="400px" height="600px" src="${e.image}" alt="">
                              </div>
                              <div class="col-7">
                              <div style="display: flex; flex-direction: column; gap: 20px; align-items: start;" class="detail" >
                                  <h4>${e.title}</h4>
                                  <h4>Sale Price : US ${e.sale_price}</h4>
                                  <h4>Size :${e.size}</h4> 
                                  <h4>Color :${e.color}</h4> 
                                  <h4>Description:<h4 class="ms-2">${e.description}</h4></h4>
                              </div>
                              </div>
                          </div>
                      </div>`)
                  }
              })

          })
      }
      getDetail()
  })

</script>
